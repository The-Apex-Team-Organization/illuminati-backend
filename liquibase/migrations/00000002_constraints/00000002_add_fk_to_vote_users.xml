<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.15.xsd">

    <changeSet id="00000002_add_fk_to_vote_users" author="Taras Andreiko">
        <addForeignKeyConstraint
            baseTableName="vote_users"
            baseColumnNames="user_id"
            referencedTableName="users"
            referencedColumnNames="id"
            onDelete="CASCADE"
            constraintName="fk_vote_users_user_id"
        />

        <addForeignKeyConstraint
            baseTableName="vote_users"
            baseColumnNames="vote_id"
            referencedTableName="votes"
            referencedColumnNames="id"
            onDelete="CASCADE"
            constraintName="fk_vote_users_vote_id"
        />

        <rollback>
            <dropForeignKeyConstraint
                baseTableName="vote_users"
                constraintName="fk_vote_users_user_id"/>

            <dropForeignKeyConstraint
                baseTableName="vote_users"
                constraintName="fk_vote_users_vote_id"/>

        </rollback>
    </changeSet>

</databaseChangeLog>
